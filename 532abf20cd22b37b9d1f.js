var cardTemplate=document.querySelector("#card-template").content,placesList=document.querySelector(".places__list"),profilePopup=document.querySelector(".popup_type_edit"),cardPopup=document.querySelector(".popup_type_new-card"),imagePopup=document.querySelector(".popup_type_image"),imagePopupCloseButton=imagePopup.querySelector(".popup__close"),popupImage=imagePopup.querySelector(".popup__image"),popupCaption=imagePopup.querySelector(".popup__caption"),profileName=document.querySelector(".profile__title"),profileDescription=document.querySelector(".profile__description"),profileFormElement=document.querySelector('.popup__form[name="edit-profile"]'),nameInput=profileFormElement.querySelector(".popup__input_type_name"),jobInput=profileFormElement.querySelector(".popup__input_type_description"),cardFormElement=document.querySelector('.popup__form[name="new-place"]'),cardNameInput=cardFormElement.querySelector(".popup__input_type_card-name"),cardLinkInput=cardFormElement.querySelector(".popup__input_type_url"),editButton=document.querySelector(".profile__edit-button"),closeButton=profilePopup.querySelector(".popup__close"),addButton=document.querySelector(".profile__add-button"),cardCloseButton=cardPopup.querySelector(".popup__close");function createCard(e){var t=cardTemplate.cloneNode(!0),o=t.querySelector(".card__image"),n=t.querySelector(".card__title"),r=t.querySelector(".card__like-button"),p=t.querySelector(".card__delete-button");return o.src=e.link,o.alt=e.name,n.textContent=e.name,r.addEventListener("click",(function(){r.classList.toggle("card__like-button_is-active")})),p.addEventListener("click",(function(){p.closest(".card").remove()})),o.addEventListener("click",(function(){popupImage.src=e.link,popupImage.alt=e.name,popupCaption.textContent=e.name,openModal(imagePopup)})),t}function renderInitialCards(e){e.forEach((function(e){var t=createCard(e);placesList.append(t)}))}function openModal(e){e.classList.add("popup_is-opened"),document.addEventListener("keydown",closeByEsc)}function closeModal(e){e.classList.remove("popup_is-opened"),document.removeEventListener("keydown",closeByEsc)}function openProfileEditModal(){nameInput.value=profileName.textContent,jobInput.value=profileDescription.textContent,openModal(profilePopup)}function handleProfileFormSubmit(e){e.preventDefault(),profileName.textContent=nameInput.value,profileDescription.textContent=jobInput.value,closeModal(profilePopup)}function openCardAddModal(){cardNameInput.value="",cardLinkInput.value="",openModal(cardPopup)}function handleCardFormSubmit(e){e.preventDefault();var t=createCard({name:cardNameInput.value,link:cardLinkInput.value});placesList.prepend(t),closeModal(cardPopup)}function toggleSaveButtonState(e,t){e.checkValidity()?(t.removeAttribute("disabled"),t.classList.remove("popup__button_disabled")):(t.setAttribute("disabled",!0),t.classList.add("popup__button_disabled"))}function showError(e,t){var o=e.nextElementSibling;o.textContent=t,o.classList.add("popup__input-error_active")}function hideError(e){var t=e.nextElementSibling;t.textContent="",t.classList.remove("popup__input-error_active")}function checkInputValidity(e){e.validity.valid?hideError(e):showError(e,e.validationMessage)}function toggleCardSaveButtonState(){var e=cardFormElement.querySelector(".popup__button");cardFormElement.checkValidity()?(e.removeAttribute("disabled"),e.classList.remove("popup__button_disabled")):(e.setAttribute("disabled",!0),e.classList.add("popup__button_disabled"))}function closeByEsc(e){if("Escape"===e.key){var t=document.querySelector(".popup_is-opened");t&&closeModal(t)}}document.querySelectorAll(".popup").forEach((function(e){e.classList.add("popup_is-animated")})),renderInitialCards(initialCards),cardNameInput.addEventListener("input",(function(){checkInputValidity(cardNameInput),toggleCardSaveButtonState()})),cardLinkInput.addEventListener("input",(function(){checkInputValidity(cardLinkInput),toggleCardSaveButtonState()})),editButton.addEventListener("click",openProfileEditModal),closeButton.addEventListener("click",(function(){return closeModal(profilePopup)})),profileFormElement.addEventListener("submit",handleProfileFormSubmit),addButton.addEventListener("click",openCardAddModal),cardCloseButton.addEventListener("click",(function(){return closeModal(cardPopup)})),cardFormElement.addEventListener("submit",handleCardFormSubmit),imagePopupCloseButton.addEventListener("click",(function(){return closeModal(imagePopup)})),document.querySelectorAll(".popup").forEach((function(e){e.addEventListener("click",(function(t){t.target===e&&closeModal(e)}))}));